(function(t){function e(e){for(var a,l,o=e[0],r=e[1],u=e[2],d=0,p=[];d<o.length;d++)l=o[d],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&p.push(i[l][0]),i[l]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);c&&c(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var r=n[o];0!==i[r]&&(a=!1)}a&&(s.splice(e--,1),t=l(l.s=n[0]))}return t}var a={},i={app:0},s=[];function l(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=a,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)l.d(n,a,function(e){return t[e]}.bind(null,a));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/last-visit/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=r;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1628:function(t,e,n){"use strict";n("f06a")},3654:function(t,e,n){"use strict";n("caba")},4537:function(t,e,n){},5300:function(t,e,n){"use strict";n("4537")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("h1",{staticClass:"hidden"},[t._v("Last visit")]),n("router-view")],1)},s=[],l=(n("cf25"),n("2877")),o={},r=Object(l["a"])(o,i,s,!1,null,null,null),u=r.exports,c=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view home"},[n("h2",{staticClass:"home__title"},[t._v("Welcome!")]),n("p",{staticClass:"home__subtitle"},[t._v("The last time you accessed was")]),n("div",{staticClass:"home__counters-group"},[n("lv-counter",{staticClass:"home__counter",attrs:{value:t.days,label:"days"}}),n("lv-counter",{staticClass:"home__counter",attrs:{value:t.hours,label:"hours"}}),n("lv-counter",{staticClass:"home__counter",attrs:{value:t.mins,label:"minutes"}}),n("lv-counter",{staticClass:"home__counter",attrs:{value:t.secs,label:"seconds"}})],1),n("lv-button",{staticClass:"lv-button--light home__button",attrs:{text:"LOGOUT"},on:{"lv-button-clicked":t.logout}})],1)},p=[],v=(n("4d90"),n("260b")),f=(n("ea7b"),n("66ce"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lv-counter"},[n("p",{staticClass:"lv-counter__digit"},[t._v(t._s(t.value))]),n("p",{staticClass:"lv-counter__label"},[t._v(t._s(t.label))])])}),h=[],m={name:"lv-counter",props:{value:String,label:String}},b=m,g=(n("f7fb"),Object(l["a"])(b,f,h,!1,null,null,null)),_=g.exports,w={name:"Home",components:{LvCounter:_},data:function(){return{lastLogin:0,intervalId:0,days:"00",hours:"00",mins:"00",secs:"00",dbRef:void 0}},methods:{getLastVisit:function(){var t=this;v["a"].apps.length&&(this.dbRef=v["a"].database().ref("Users/".concat(v["a"].auth().currentUser.uid)),this.dbRef.once("value",(function(e){return t.configInterval(e.val().lastSignIn)})))},logout:function(){var t=this;this.updateLastVisit(),v["a"].auth().signOut().then((function(){window.clearInterval(t.intervalId),t.$router.push("login")}))},updateLastVisit:function(){var t=(new Date).getTime();this.dbRef.set({lastSignInTime:t})},calculateTimeSpend:function(){var t=(new Date).getTime(),e=t-this.lastLogin,n=new Date(e);this.days=String(n.getDate()-1).padStart(2,"0"),this.hours=String(n.getHours()-1).padStart(2,"0"),this.mins=String(n.getMinutes()).padStart(2,"0"),this.secs=String(n.getSeconds()).padStart(2,"0")},configInterval:function(t){this.lastLogin=t,this.calculateTimeSpend(),this.intervalId=window.setInterval(this.calculateTimeSpend,1e3)}},mounted:function(){this.getLastVisit()}},S=w,y=(n("3654"),Object(l["a"])(S,d,p,!1,null,null,null)),x=y.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login view"},[a("img",{staticClass:"login__icon",attrs:{src:n("e426")}}),a("form",{staticClass:"login__form",attrs:{novalidate:""}},[a("lv-input",{attrs:{placeholder:"Email",type:"email",validations:"email|required",name:"email",label:"E-mail",id:"login-email"},on:{"lv-input-value":function(e){return t.setValue(e,"email")}}}),a("lv-input",{attrs:{placeholder:"password",type:"password",validations:"required",name:"password",label:"Password",id:"login-pass"},on:{"lv-input-value":function(e){return t.setValue(e,"password")}}}),a("lv-button",{staticClass:"lv-button--dark login__form-button",attrs:{text:"Log In","max-width":"",disableButton:t.disableButton},on:{"lv-button-clicked":t.login}})],1)])},I=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lv-input"},[n("label",{staticClass:"hidden",attrs:{for:t.inputId}},[t._v(t._s(t.label))]),n("input",{directives:[{name:"validate",rawName:"v-validate",value:t.validations,expression:"validations"}],staticClass:"lv-input__input",attrs:{id:t.inputId,type:t.type,placeholder:t.placeholder,"data-vv-as":t.inputAlias,name:t.name},on:{input:t.emitValue}}),n("p",{staticClass:"lv-input__error"},[t._v(t._s(t.errors&&t.errors.first(t.name)))])])},j=[],T=(n("498a"),{name:"lv-input",props:{type:{type:String,default:"text"},label:String,placeholder:String,validations:String,inputAlias:String,name:String,inputId:String},methods:{emitValue:function(t){this.$emit("lv-input-value",t.target.value.trim())}}}),L=T,k=(n("d552"),Object(l["a"])(L,O,j,!1,null,null,null)),E=k.exports,$={name:"Login",components:{LvInput:E},data:function(){return{email:"",password:"",lastSignIn:0}},computed:{disableButton:function(){return""===this.email||""===this.password||!!this.errors.items.length}},methods:{login:function(){var t=this;v["a"].auth().signInWithEmailAndPassword(this.email,this.password).then((function(e){var n=new Date(e.user.metadata.lastSignInTime).getTime(),a=v["a"].database().ref("Users/".concat(e.user.uid));a.on("value",(function(t){t.exists()&&t.val().lastSignIn||a.set({lastSignIn:n})})),t.$router.push("home")})).catch((function(t){console.log(t)}))},setValue:function(t,e){this[e]=t}}},V=$,B=(n("1628"),Object(l["a"])(V,C,I,!1,null,null,null)),P=B.exports;a["a"].use(c["a"]);var A=[{path:"*",redirect:{name:"Login"}},{path:"/home",name:"Home",component:x},{path:"/login",name:"Login",component:P}],D=new c["a"]({routes:A});D.beforeEach((function(t,e,n){var a=v["a"].auth().currentUser;a&&"/login"===t.path?(v["a"].auth().signOut(),n()):a||"/login"===t.path?n():n("/login")}));var M=D,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"lv-button",class:{"lv-button--max-width":t.maxWidth,"lv-button--disable":t.disableButton},attrs:{type:t.type},on:{click:t.btnClicked}},[t._v(t._s(t.text))])},W=[],H={name:"lv-button",props:{text:String,type:{type:String,default:"button"},maxWidth:Boolean,disableButton:Boolean},methods:{btnClicked:function(){this.$emit("lv-button-clicked")}}},J=H,R=(n("5300"),Object(l["a"])(J,U,W,!1,null,null,null)),K=R.exports,q=n("7bb1"),z={apiKey:"AIzaSyBQ6-TlsOt7TSN9JHMZhVuxKAJE3WKrmTk",authDomain:"last-visit-32fc1.firebaseapp.com",projectId:"last-visit-32fc1",storageBucket:"last-visit-32fc1.appspot.com",messagingSenderId:"56543789226",appId:"1:56543789226:web:ef19e7de6b29dda5c590d3"};v["a"].initializeApp(z),a["a"].use(q["a"]),a["a"].config.productionTip=!1,a["a"].component("lv-button",K),new a["a"]({router:M,render:function(t){return t(u)}}).$mount("#app")},"8fa6":function(t,e,n){},be78:function(t,e,n){},caba:function(t,e,n){},cf25:function(t,e,n){"use strict";n("fea6")},d552:function(t,e,n){"use strict";n("8fa6")},e426:function(t,e,n){t.exports=n.p+"img/padlock.9ca9ae37.svg"},f06a:function(t,e,n){},f7fb:function(t,e,n){"use strict";n("be78")},fea6:function(t,e,n){}});
//# sourceMappingURL=app.70be8232.js.map